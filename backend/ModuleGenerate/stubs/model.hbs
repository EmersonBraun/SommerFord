import { BaseModel, column, HasOne, hasOne, manyToMany, ManyToMany } from '@ioc:Adonis/Lucid/Orm'
{{#if module.hasDatetime}}import { DateTime } from 'luxon'{{/if}}
{{#if module.relations}}
{{#each module.relations}}import {{name}} from './{{name}}'{{/each}}
{{/if}}

export default class {{module.name.pascalCase}} extends BaseModel {
{{#each module.fields}}
  {{#if isPrimary}}@column({ isPrimary: true }){{/if}}
  {{#if dateTime}}@column.dateTime({ autoCreate: true{{#isUpdatedAt name }}, autoUpdate: true {{/isUpdatedAt}} }){{/if}}
  public {{name}}: {{type}}
{{/each}}

{{#if module.relations}}
{{#each module.relations}}
  @hasOne(() => {{name}})
  public {{field}}: HasOne<typeof {{name}}>
{{/each}}
{{/if}}

{{#if module.manyToMany}}
{{#each module.manyToMany}}
  @manyToMany(() => {{name}}, {
    pivotTable: '{{pivotTable}}',
  })
  public {{field}}: ManyToMany<typeof {{name}}>
{{/each}}
{{/if}}
}